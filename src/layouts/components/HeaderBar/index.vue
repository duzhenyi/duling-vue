<template>
  <a-layout-header class="header">
    <a-row>
      <a-col :span="col_1_span" v-if="displayLogo && layout==='vertical'">
        <!--logo-->
        <div class="header_Logo">
          <a href="/" class="router-link-active">
            <img class="logo" src="@/images/logo.png" />
            <a v-if="!collapsible">
              <h1 class="logo-title">Duling ADMIN</h1>
            </a>
          </a>
        </div>
      </a-col>

      <a-col :span="col_2_span">
        <!-- å½“å¸ƒå±€æ˜¯å‚ç›´å¸ƒå±€verticalæ—¶sideå­˜åœ¨çš„æ—¶å€™æ‰ä¼šå‡ºç°-->
        <span
          style="margin-right:10px"
          v-if="layout==='horizontal'"
          :class="headerTheme=== 'light' ? 'trigger' : 'trigger theme-color'"
        >
          <a-icon :type="collapsed ? 'menu-unfold' : 'menu-fold'" @click="displaySideMenuClick" />
        </span>

        <!-- å½“æ°´å¹³å¸ƒå±€çš„æ—¶å€™ sideèœå•æ˜¾ç¤ºåˆ°è¿™é‡Œ-->
        <a-menu
          v-if="layout==='vertical'"
          :default-selected-keys="['home']"
          mode="horizontal"
          :theme="headerTheme"
          :style="{ lineHeight: '64px' }"
        >
          <a-sub-menu key="home">
            <span slot="title">
              <a-icon type="home" />
              <span>é¦–é¡µ</span>
            </span>
            <a-menu-item key="sub1-1">é¦–é¡µ1</a-menu-item>
            <a-menu-item key="sub1-2">é¦–é¡µ2</a-menu-item>
            <a-menu-item key="sub1-3">é¦–é¡µ3</a-menu-item>
          </a-sub-menu>
          <!-- 
          <a-menu-item key="home">
            <a-icon type="home" />
            <span>é¦–é¡µ</span>
          </a-menu-item>-->

          <a-sub-menu key="sub1">
            <span slot="title">
              <a-icon type="user" />
              <span>ç”¨æˆ·ä¸­å¿ƒ</span>
            </span>
            <a-menu-item key="sub1-1">æ™®é€šä¼šå‘˜</a-menu-item>
            <a-menu-item key="sub1-2">å¹³å°ç”¨æˆ·</a-menu-item>
            <a-menu-item key="sub1-3">å°é»‘å±‹</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub2">
            <span slot="title">
              <a-icon type="shop" />
              <span>å•†å“ç®¡ç†</span>
            </span>
            <a-menu-item key="sub2-1">å·²ä¸Šæ¶</a-menu-item>
            <a-menu-item key="sub2-2">å¾…ä¸Šæ¶</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub3">
            <span slot="title">
              <a-icon type="appstore" />
              <span>è®¢å•ç®¡ç†</span>
            </span>
            <a-menu-item key="sub3-1">æœªæ”¯ä»˜è®¢å•</a-menu-item>
            <a-menu-item key="sub3-2">å·²æ”¯ä»˜è®¢å•</a-menu-item>
            <a-menu-item key="sub3-3">å¾…å‘è´§è®¢å•</a-menu-item>
            <a-sub-menu key="sub3-4" title="å¾…å¤„ç†è®¢å•">
              <a-menu-item key="sub3-4-1">æ¢è´§è®¢å•</a-menu-item>
              <a-menu-item key="sub3-4-2">é€€è´§è®¢å•</a-menu-item>
            </a-sub-menu>
          </a-sub-menu>

          <a-sub-menu key="sub4">
            <span slot="title">
              <a-icon type="book" />
              <span>æ–‡ç« ç®¡ç†</span>
            </span>
            <a-menu-item key="sub4-1">æŠ€æœ¯æ•£æ–‡</a-menu-item>
            <a-menu-item key="sub4-2">äººç”Ÿæ„Ÿæ‚Ÿ</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub5">
            <span slot="title">
              <a-icon type="deployment-unit" />
              <span>ç«™ç‚¹ç®¡ç†</span>
            </span>
            <a-menu-item key="sub5-1">ç«™ç‚¹é…ç½®</a-menu-item>
            <a-menu-item key="sub5-2">å‹æƒ…é“¾æ¥</a-menu-item>
            <a-menu-item key="sub5-3">ç«™ç‚¹ç»Ÿè®¡</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub6">
            <span slot="title">
              <a-icon type="reconciliation" />
              <span>åŠŸèƒ½ç®¡ç†</span>
            </span>
            <a-menu-item key="sub6-1">æ¨¡å—èµ„æº</a-menu-item>
            <a-menu-item key="sub6-2">èœå•èµ„æº</a-menu-item>
            <a-menu-item key="sub6-3">APIèµ„æº</a-menu-item>
            <a-menu-item key="sub6-4">æ“ä½œæŒ‰é’®</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub7">
            <span slot="title">
              <a-icon type="crown" />
              <span>æƒé™ç®¡ç†</span>
            </span>
            <a-menu-item key="sub7-1">åŠŸèƒ½èœå•æƒé™</a-menu-item>
            <a-menu-item key="sub7-2">å­—æ®µå±æ€§æƒé™</a-menu-item>
            <a-menu-item key="sub7-3">æ•°æ®è®¿é—®æƒé™</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub8">
            <span slot="title">
              <a-icon type="bug" />
              <span>æ—¥å¿—ç®¡ç†</span>
            </span>
            <a-menu-item key="sub8-1">ç™»å½•æ—¥å¿—</a-menu-item>
            <a-menu-item key="sub8-2">é€šä¿¡æ—¥å¿—</a-menu-item>
            <a-menu-item key="sub8-3">æ“ä½œæ—¥å¿—</a-menu-item>
            <a-menu-item key="sub8-4">å¼‚å¸¸æ—¥å¿—</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub10">
            <span slot="title">
              <a-icon type="area-chart" />
              <span>æ™ºèƒ½åˆ†æ</span>
            </span>
            <a-menu-item key="sub10-1">è®¿é—®ç»Ÿè®¡</a-menu-item>
            <a-menu-item key="sub10-2">ç™»å½•ç»Ÿè®¡</a-menu-item>
            <a-menu-item key="sub10-3">æ³¨å†Œç»Ÿè®¡</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub11">
            <span slot="title">
              <a-icon type="alert" />
              <span>è¯„è®ºç®¡ç†</span>
            </span>
            <a-menu-item key="sub11-1">å›æ”¶ç«™è¯„è®º</a-menu-item>
            <a-menu-item key="sub11-2">å¾…å®¡æ ¸è¯„è®º</a-menu-item>
            <a-menu-item key="sub11-3">å·²å®¡æ ¸è¯„è®º</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub12">
            <span slot="title">
              <a-icon type="calendar" />
              <span>å¹¿å‘Šç®¡ç†</span>
            </span>
            <a-menu-item key="sub12-1">å¹¿å‘Šä½ç½®</a-menu-item>
            <a-menu-item key="sub12-2">å¹¿å‘Šè®¡åˆ’</a-menu-item>
            <a-menu-item key="sub12-3">è¿‡æœŸå¹¿å‘Š</a-menu-item>
          </a-sub-menu>

          <a-menu-item key="sub13">
            <a-icon type="message" />
            <span>ç•™è¨€ç®¡ç†</span>
          </a-menu-item>

          <a-sub-menu key="sub14">
            <span slot="title">
              <a-icon type="mail" />
              <span>é‚®ä»¶ç®¡ç†</span>
            </span>
            <a-menu-item key="sub14-1">é‚®ä»¶æ¨¡æ¿</a-menu-item>
            <a-menu-item key="sub14-2">å‘é€é‚®ä»¶</a-menu-item>
            <a-menu-item key="sub14-3">å·²å‘é‚®ä»¶</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub15">
            <span slot="title">
              <a-icon type="qq" />
              <span>QVç¾¤ç®¡ç†</span>
            </span>
            <a-menu-item key="sub15-1">QQç¾¤</a-menu-item>
            <a-menu-item key="sub15-1">å¾®ä¿¡ç¾¤</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub16">
            <span slot="title">
              <a-icon type="laptop" />
              <span>èœ˜è››ç®¡ç†</span>
            </span>
            <a-menu-item key="sub16-1">èœ˜è››é…ç½®</a-menu-item>
            <a-menu-item key="sub16-2">èœ˜è››è§„åˆ™</a-menu-item>
            <a-menu-item key="sub16-3">é»„é›€ç½‘ç«™</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub17">
            <span slot="title">
              <a-icon type="hourglass" />
              <span>å®šæ—¶ä»»åŠ¡</span>
            </span>
            <a-menu-item key="sub17-1">ä»»åŠ¡é…ç½®</a-menu-item>
            <a-menu-item key="sub17-2">æ‰§è¡Œä¸­ä»»åŠ¡</a-menu-item>
            <a-menu-item key="sub17-3">å¾…æ‰§è¡Œä»»åŠ¡</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub18">
            <span slot="title">
              <a-icon type="file-text" />
              <span>åŸºç¡€ç®¡ç†</span>
            </span>
            <a-menu-item key="sub18-1">å­—å…¸å‚æ•°</a-menu-item>
            <a-menu-item key="sub18-2">å­˜å‚¨è®¾ç½®</a-menu-item>
            <a-menu-item key="sub18-3">ä»£ç ç”Ÿæˆ</a-menu-item>
            <a-menu-item key="sub18-4">æ•°æ®åº“è®¾ç½®</a-menu-item>
          </a-sub-menu>

          <a-sub-menu key="sub19">
            <span slot="title">
              <a-icon type="setting" />
              <span>ç³»ç»Ÿç®¡ç†</span>
            </span>
            <a-menu-item key="sub19-1">ç³»ç»Ÿè®¾ç½®</a-menu-item>
            <a-menu-item key="sub19-2">å…³é”®å­—è¿‡æ»¤</a-menu-item>
            <a-menu-item key="sub19-3">IPé™åˆ¶</a-menu-item>
          </a-sub-menu>
        </a-menu>

        <!--å‚ç›´å¸ƒå±€çš„æ—¶å€™ï¼Œé¡¶éƒ¨å¿«æ·èœå•-->
        <a-menu
          v-if="layout==='horizontal'"
          :theme="headerTheme"
          mode="horizontal"
          :style="{ 'line-height':'64px', 'display': 'inline-block'}"
        >
          <a-menu-item key="2">åŸºç¡€è®¾æ–½</a-menu-item>
          <a-menu-item key="3">ç«™ç‚¹1</a-menu-item>
          <a-menu-item key="4">å•†åœº2</a-menu-item>
          <a-menu-item key="5">å…¶ä»–ç®¡ç†</a-menu-item>
        </a-menu>
      </a-col>

      <a-col :span="col_3_span">
        <!--é¡¶éƒ¨å³ä¾§å·¥å…·-->
        <div class="header-tool-right">
          <!--æœç´¢æ¡†-->
          <span class="tool">
            <input placeholder="ğŸ‰input search text" class="header-search" />
          </span>

          <!--å…¨å±-->
          <span class="tool theme-color">
            <screenfull-bar></screenfull-bar>
          </span>

          <!--gitåœ°å€-->
          <span class="tool theme-color">
            <a-tooltip placement="bottom">
              <template slot="title">
                <a href target="_blank">Gitåœ°å€</a>
              </template>
              <a-icon type="github" :style="{ fontSize: '18px' }" />
            </a-tooltip>
          </span>

          <!--é€šçŸ¥-->
          <span class="tool theme-color">
            <a-popover placement="bottomRight" trigger="hover">
              <template slot="content">
                <a-tabs default-active-key="1">
                  <a-tab-pane key="1" tab="é€šçŸ¥">
                    <a-list>
                      <a-list-item>
                        <a-list-item-meta description="annita.auer@example.com">
                          <a slot="title" href="item.href">Auer</a>
                          <a-avatar
                            slot="avatar"
                            src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
                          />
                        </a-list-item-meta>
                        <strong>2020-06-19 19:02:59</strong>
                      </a-list-item>
                      <a-list-item>
                        <a-list-item-meta description="annita.auer@example.com">
                          <a slot="title" href="item.href">Auer</a>
                          <a-avatar
                            slot="avatar"
                            src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
                          />
                        </a-list-item-meta>
                        <strong>2020-06-19 19:02:59</strong>
                      </a-list-item>
                      <a-list-item>
                        <a-list-item-meta description="annita.auer@example.com">
                          <a slot="title" href="item.href">Auer</a>
                          <a-avatar
                            slot="avatar"
                            src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
                          />
                        </a-list-item-meta>
                        <strong>2020-06-19 19:02:59</strong>
                      </a-list-item>
                      <a-list-item>
                        <a-list-item-meta description="annita.auer@example.com">
                          <a slot="title" href="item.href">Auer</a>
                          <a-avatar
                            slot="avatar"
                            src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
                          />
                        </a-list-item-meta>
                        <strong>2020-06-19 19:02:59</strong>
                      </a-list-item>
                    </a-list>
                  </a-tab-pane>
                  <a-tab-pane key="2" tab="å…³æ³¨" force-render>
                    <a-list>
                      <a-list-item>
                        <a-list-item-meta description="Progresser XTech">
                          <a slot="title" href="https://www.antdv.com/">Lily</a>
                          <a-avatar
                            slot="avatar"
                            src="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"
                          />
                        </a-list-item-meta>
                        <a>View Profile</a>
                      </a-list-item>
                      <a-list-item>
                        <a-list-item-meta description="Progresser XTech">
                          <a slot="title" href="https://www.antdv.com/">Lily</a>
                          <a-avatar
                            slot="avatar"
                            src="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"
                          />
                        </a-list-item-meta>
                        <a>View Profile</a>
                      </a-list-item>
                      <a-list-item>
                        <a-list-item-meta description="Progresser XTech">
                          <a slot="title" href="https://www.antdv.com/">Lily</a>
                          <a-avatar
                            slot="avatar"
                            src="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"
                          />
                        </a-list-item-meta>
                        <a>View Profile</a>
                      </a-list-item>
                    </a-list>
                  </a-tab-pane>
                </a-tabs>
              </template>
              <a-badge count="5">
                <a-icon type="bell" :style="{ fontSize: '18px' }" />
              </a-badge>
            </a-popover>
          </span>

          <!--å¤šè¯­è¨€-->
          <span class="tool theme-color">
            <a-popover placement="bottomRight" trigger="hover">
              <template slot="content">
                <a-list item-layout="horizontal">
                  <a-list-item>
                    <span>
                      <a-icon :style="{ fontSize: '16px' }" type="solution" />ç®€ä½“ä¸­æ–‡
                    </span>
                  </a-list-item>
                  <a-list-item>
                    <span class="active">
                      <a-icon :style="{ fontSize: '16px' }" type="setting" />Englich
                    </span>
                  </a-list-item>
                </a-list>
              </template>
              <a-icon type="global" :style="{ fontSize: '18px' }" />
            </a-popover>
          </span>

          <!--æ‰“å¼€ä¸»é¢˜è®¾ç½®-->
          <span class="tool theme-color">
            <a-tooltip placement="bottomLeft">
              <template slot="title">ä¸»é¢˜è®¾ç½®</template>
              <a-icon @click="showThemeDrawerClick" type="dashboard" :style="{ fontSize: '18px' }" />
              <theme-bar></theme-bar>
            </a-tooltip>
          </span>

          <!--å¤´åƒ-->
          <span class="tool theme-color">
            <a-dropdown placement="bottomLeft">
              <!-- <a-avatar
            size="large"
            src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
              />-->
              <div style="height:100%;width:100%;">
                <a-avatar style="color: #f56a00; backgroundColor: #fde3cf">D</a-avatar>
                <span>Admin</span>
                <a-icon type="caret-down" theme="filled" />
              </div>
              <a-menu slot="overlay">
                <a-menu-item key="1">
                  <a-icon :style="{ fontSize: '16px' }" type="solution" />ä¸ªäººä¸­å¿ƒ
                </a-menu-item>
                <a-menu-divider />
                <a-menu-item key="2">
                  <a-icon :style="{ fontSize: '16px' }" type="setting" />ç³»ç»Ÿè®¾ç½®
                </a-menu-item>
                <a-menu-divider />
                <a-menu-item key="3" @click="logoOut">
                  <a-icon :style="{ fontSize: '16px'}" type="logout" />é€€å‡ºç³»ç»Ÿ
                </a-menu-item>
              </a-menu>
            </a-dropdown>
          </span>
        </div>
      </a-col>
    </a-row>
  </a-layout-header>
</template>
<script>
import ThemeBar from "_c/ThemeBar";
import ScreenfullBar from "_c/ScreenfullBar";
import Bus from "../bus";
import { mapActions } from "vuex";
export default {
  components: {
    ScreenfullBar,
    ThemeBar
  },
  data() {
    return {
      collapsed: false,
      visible: false,
      col_1_span: 4,
      col_2_span: 10,
      col_3_span: 10
    };
  },
  created() {
    if (this.layout === "vertical") {
      this.col_1_span = 3;
      this.col_2_span = 11;
      this.col_3_span = 10;
    } else {
      this.col_1_span = 0;
      this.col_2_span = 14;
      this.col_3_span = 10;
    }
    //ä¸»é¢˜é…ç½®é¡µå…³é—­çš„æ—¶å€™ä¼ å€¼è¿‡æ¥
    Bus.$on("showThemeDrawer", val => {
      this.visible = val;
    });
  },
  methods: {
    ...mapActions(["loginOut"]),
    displaySideMenuClick() {
      this.collapsed = !this.collapsed;
      //å­ç»„ä»¶å‘å…„å¼Ÿç»„ä»¶ä¼ å€¼
      //displaySideMenuæ˜¯çˆ¶ç»„ä»¶æŒ‡å®šçš„ä¼ æ•°æ®ç»‘å®šçš„å‡½æ•°ï¼Œthis.collapsed:å­ç»„ä»¶ç»™å…„å¼Ÿç»„ä»¶ä¼ é€’çš„æ•°æ®
      Bus.$emit("displaySideMenu", this.collapsed);
    },
    // æ˜¾ç¤ºéšè—ä¸»é¢˜è®¾ç½®
    showThemeDrawerClick() {
      this.visible = !this.visible;
      // ä¼ å€¼ç»™ä¸»é¢˜é…ç½®é¡µé¢
      Bus.$emit("showThemeDrawer", this.visible);
    },
    //é€€å‡ºç³»ç»Ÿ
    logoOut() {
      let that = this;
      this.loginOut()
        .then(res => {
          that.$router.push({ path: "/login" }).catch(error => {});
        })
        .catch(err => {
        })
        .finally(() => {});
    }
  },
  props: {
    fixedSideBar: {
      type: Boolean,
      required: false,
      default: false
    },
    //èœå•ç±»å‹ï¼Œç°åœ¨æ”¯æŒå‚ç›´ã€æ°´å¹³ã€å’Œå†…åµŒæ¨¡å¼ä¸‰ç§ string: vertical vertical-right horizontal inlin
    menuMode: {
      type: String,
      required: false,
      default: "horizontal"
    },
    //ä¸»é¢˜é¢œè‰² string: light dark
    headerTheme: {
      type: String,
      required: false,
      default: "dark"
    },
    // å…¨å±€å¸ƒå±€æ–¹å¼ horizontal,vertical
    layout: {
      type: String,
      required: false,
      default: "horizontal"
    },
    // æ˜¯å¦æ˜¾ç¤ºlogo
    displayLogo: {
      type: Boolean,
      required: false,
      default: true
    }
  }
};
</script>
<style lang="less" scoped>
.header {
  background: "#ffff";
  padding: 0;
  .header_Logo {
    height: 31px;
    margin: 0px 16px 16px 16px;
  }
}
.headerFixed {
  position: "fixed";
  z-index: 1;
  width: "100%";
}

//å¤´éƒ¨å³ä¾§å·¥å…·æ 
.header-tool-right {
  float: right;
  height: 100%;
  .tool {
    cursor: pointer;
    padding: 0 12px;
    display: inline-block;
    transition: all 0.3s;
    height: 100%;
    color: rgba(0, 0, 0, 0.65);

    .header-search {
      outline: none;
      border: none;
      background: transparent;
      color: #ffff;
    }

    .tool:hover {
      background: rgba(0, 0, 0, 0.025);
    }

    .avatar {
      margin: 20px 8px 20px 0;
      color: #1890ff;
      background: hsla(0, 0%, 100%, 0.85);
      vertical-align: middle;
    }

    .icon {
      font-size: 16px;
      padding: 4px;
    }
  }
}
.ant-list-item {
  padding: 6px 0;
  cursor: pointer;
  .active {
    color: #1890ff;
  }
}
.ant-list-item:hover {
  color: #1890ff;
}
</style>